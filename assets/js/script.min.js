$(function () {
    if (screen.width >= 992) {
        var data = [
            {
                action: 'type',
                strings: ["load kenexar.logo"],
                output: '<span class="gray">Loading ...</span><br>&nbsp;',
                postDelay: 2000
            },
            {
                action: 'type',
                // clear: true,
                strings: ['cat kenexar.logo'],
                output: $('.mimik-run-output').html()
            },
            {
                action: 'type',
                strings: ["that was easy!", 'Now it\'s your turn!']
            },
            {
                action: 'view'
            }

        ];

    } else {
        var data = [
            {
                action: 'type',
                strings: ["load kenexar.logo"],
                output: '<span class="gray">Loading ...</span><br>&nbsp;',
                postDelay: 2000
            },
            {
                action: 'type',
                // clear: true,
                strings: ['echo kenexar.logo'],
                output: ["You're on a Mobile phone? I see, the screen is small to Display the Logo, I'm sorry :("]
            }
        ];
    }
    runScripts(data, 0);
});

function runScripts(data, pos) {
    var prompt = $('.prompt'),
        script = data[pos];
    if (script.clear === true) {
        $('.history').html('');
    }
    switch (script.action) {
        case 'type':
            // cleanup for next execution
            prompt.removeData();
            $('.typed-cursor').text('');
            prompt.typed({
                strings: script.strings,
                typeSpeed: 30,
                callback: function () {
                    var history = $('.history').html();
                    history = history ? [history] : [];
                    history.push('root@salza:~$ ' + prompt.text());
                    if (script.output) {
                        history.push(script.output);
                        prompt.html('');
                        $('.history').html(history.join('<br>'));
                    }
                    // scroll to bottom of screen
                    $('section.terminal').scrollTop($('section.terminal').height());
                    // Run next script
                    pos++;
                    if (pos < data.length) {
                        setTimeout(function () {
                            runScripts(data, pos);
                        }, script.postDelay || 1000);
                    }
                }
            });
            
            break;
        case 'view':
            $('#scroll-btn').css('transform', 'translateY(0)');
            break;
    }
}
